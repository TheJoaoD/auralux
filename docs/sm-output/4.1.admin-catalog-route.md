# Story 4.1: Criar Rota de GestÃ£o de CatÃ¡logo no App Administrativo

## Status
**Draft**

## Story

**As a** desenvolvedor,
**I want** criar nova seÃ§Ã£o no app autenticado para gestÃ£o do catÃ¡logo,
**so that** gestores possam acessar ferramentas de controle do catÃ¡logo pÃºblico.

## Acceptance Criteria

1-2. DiretÃ³rio /app/(authenticated)/catalogo-admin criado
3. Menu lateral: novo item "GestÃ£o de CatÃ¡logo" (Ã­cone ðŸ·ï¸)
4. Middleware valida autenticaÃ§Ã£o Supabase Auth
5. Layout reutiliza RootLayout autenticado
6. Dashboard com mÃ©tricas: Total produtos, Destaques, SolicitaÃ§Ãµes, Pedidos hoje
7. Cards clicÃ¡veis navegam para seÃ§Ãµes
8. Tabs: Produtos, SolicitaÃ§Ãµes, Pedidos, Analytics
9. Integration test: redirect se nÃ£o autenticado

## Tasks / Subtasks

- [ ] **Task 1: Estrutura de diretÃ³rios** (AC: 1-2, 5)
  - [ ] Criar /app/(authenticated)/catalogo-admin/page.tsx
  - [ ] Reutilizar layout autenticado existente

- [ ] **Task 2: Menu lateral** (AC: 3)
  - [ ] Adicionar item "GestÃ£o de CatÃ¡logo" no sidebar
  - [ ] Ãcone e rota /catalogo-admin

- [ ] **Task 3: Dashboard com mÃ©tricas** (AC: 6-7)
  - [ ] Queries Supabase para mÃ©tricas
  - [ ] Cards clicÃ¡veis

- [ ] **Task 4: Tabs de navegaÃ§Ã£o** (AC: 8)
  - [ ] Tabs component (shadcn/ui)

- [ ] **Task 5: Middleware** (AC: 4, 9)
  - [ ] Validar auth.uid() em /catalogo-admin/*

## Dev Notes

Dashboard metrics queries:
```typescript
// Total produtos no catÃ¡logo
SELECT COUNT(*) FROM catalog_items WHERE visible = true;

// Produtos em destaque
SELECT COUNT(*) FROM catalog_items WHERE featured = true;

// SolicitaÃ§Ãµes pendentes
SELECT COUNT(*) FROM catalog_requests WHERE status = 'pending';

// Pedidos hoje
SELECT COUNT(*) FROM catalog_orders WHERE created_at >= CURRENT_DATE;
```

**Dependencies**: Epic 1

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-09 | v1.0 | Created | Bob (SM) |
